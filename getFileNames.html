<!DOCTYPE html>
<html>
<head>
	<title>FileName Generator</title>
	<script type="text/javascript" src="classes/jquery-1.11.3.min.js" ></script>
	
	<script type="text/javascript">
		$(document).ready(function($) {
			$("#btnFormat").click(function(e) {
				//check if Panteao or Pluralsight
				e.preventDefault();
				var siteChecked = "";
				siteChecked = $('input[name="site"]:checked', '#form1').val();
				
				if(siteChecked == "panteao"){
					formatPanteaoFilenames();
				}else if(siteChecked == "pluralsight"){
					//alert("call formatPluralsightFilenames ");
					formatPluralsightFilenames();

				}else{
					alert("Unknown Site!");
				}

			});
		
			function formatPluralsightFilenames(){
				var datahtml = $("#txtFileNames").val();
				if( datahtml.indexOf('class="section-container accordion"') > 0 ){
					//correct container go ahead!
				    $('#div1').append(datahtml);

			    	var outputText = "";

				    //go through Chapters &  get their lessons
				    var rawHtmlObj = $('div.section-container.accordion');
					//loop through sections 
				    rawHtmlObj.find('div.section.ng-scope').each(function(index, el) {
				    	//get section names
				    	var sectionName = $(this).find('p.title a').text().trim();
				    	if( sectionName != "" ){ 
				    		outputText += "+" + sectionName + "\n"; 

				    		//loop through sections & get lessons
				    		//$(this).each(function(index, el) {
				    			$(this).find('li h5').each(function(index, el) {
				    				var lessonName = $(this).text().trim();
				    				if( lessonName != "" ){ 
						    			outputText += "++" + lessonName + "\n"; 
						    		}
				    			});
						    	
				    		//});
				    	}
				    });

				    if(outputText != ""){
				    	$("#txtFileNames").val(outputText);
				    }

				}
   
			}

			function formatPanteaoFilenames(){

			}
		});
	</script>

</head>
<body>
	<table class="container" cellspacing="0" cellpadding="1" id="entered">
		<tr>
			<td>
				<form id="form1">
					<table align="center" width="700" border="0">
						<tr id="menu">
							<td width="700" align="left">
								<label>-Enter raw Html from PluralSight or Panteao then Click "Get Formatted FileNames".</label>
								<br/>
								<label>-For Panteao Enter OuterHtml of "div.nano-content" Below (using Webdeveloper tools in Browser).<br/>
								<label>-For PluralSight Enter OuterHtml of "div.section-container.accordion" Below (using Webdeveloper tools in Browser.</label>
								<br/>
							</td>
						</tr>
						<tr>
							<td width="700" align="center">
								<input type="radio" name="site" value="panteao" checked="checked">Panteao
								<input type="radio" name="site" value="pluralsight">Pluralsight
							</td>
						</tr>
						<tr>
							<td width="100%" valign="top">
								<div id="listing" style="display:block;">
									<table border="0" style="width:710px;">
										<tr>
											<td align="center">
												<textarea id="txtFileNames" name="links" rows="25" cols="100" style="width:600px;height:480px;border:1px solid #002E43;"></textarea>
											</td>
										</tr>
										<tr>
											<td align="center" valign="top">
												<input type="button" id="btnFormat" value="Get Formatted FileNames"  />
											</td>
										</tr>
									</table>
								</div>
							</td>
						</tr>
					</table>
				</form>
			</td>
		</tr>
	</table>
	<div id="div1" style="display:none;"></div>
</body>
</html>